digraph XXXMotorControlImproved{
    graph [rankdir="LR", fontname="Latin Modern Math"];
    node [color="black", fillcolor="white", shape="circle", style="filled", fontname="Latin Modern Math"];
    edge [fontname="Latin Modern Math"];

    s0[fillcolor="gray", label=<s<sub>0</sub>>];
    s1[label=<s<sub>1</sub>>];
    s2[label=<s<sub>2</sub>>];
    s3[label=<s<sub>3</sub>>];
    s4[label=<s<sub>4</sub>>];
    s5[label=<s<sub>5</sub>>];
    s6[label=<s<sub>6</sub>>];
    s7[label=<s<sub>7</sub>>];
    s8[label=<s<sub>8</sub>>];
    s9[label=<s<sub>9</sub>>];
    s10[label=<s<sub>10</sub>>];

    s0->s1[label=<<i>init:0/&#91;r<sub>1</sub> := 0, r<sub>2</sub> := 0, r<sub>3</sub> := 999&#93;</i>>];
    s1->s2[label=<<i>feed:1/&#91;r<sub>4</sub> := i<sub>0</sub>&#93;</i>>];
    s2->s3[label=<<i>m3r:0/&#91;r<sub>3</sub> := r<sub>3</sub> - 1&#93;</i>>];
    s3->s4[label=<<i>m2:0/&#91;r<sub>2</sub> := r<sub>2</sub> + 1, r<sub>4</sub> := r<sub>4</sub> - 1&#93;</i>>];
    s4->s2[label=<<i>check:0&#91;r<sub>4</sub> &gt; 0&#93;</i>>];
    s4->s10[label=<<i>check:0&#91;r<sub>4</sub> = 0&#93;</i>>];
    s10->s5[label=<<i>release:0</i>>];
    s5->s6[label=<<i>pass:0</i>>];
    s6->s7[label=<<i>m1:0/&#91;r<sub>1</sub> := r<sub>1</sub> + 1&#93;</i>>];
    s7->s6[label=<<i>check:0&#91;r<sub>1</sub> &le; 500&#93;</i>>];
    s7->s8[label=<<i>check:0&#91;r<sub>1</sub> &gt; 500&#93;</i>>];
    s8->s9[label=<<i>m1r:0/&#91;r<sub>1</sub> := r<sub>1</sub> - 1&#93;</i>>];
    s9->s8[label=<<i>check:0&#91;r<sub>1</sub> &gt; 0&#93;</i>>];
    s9->s1[label=<<i>check:0&#91;r<sub>1</sub> = 0&#93;</i>>];
}
