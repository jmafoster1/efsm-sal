%
\begin{isabellebody}%
\setisabellecontext{Coin{\isacharunderscore}Tea}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Coin{\isacharunderscore}Tea\isanewline
\ \ \isakeyword{imports}\ {\isachardoublequoteopen}EFSM{\isachardot}EFSM{\isacharunderscore}LTL{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isacommand{declare}\isamarkupfalse%
\ One{\isacharunderscore}nat{\isacharunderscore}def\ {\isacharbrackleft}simp\ del{\isacharbrackright}\isanewline
\isacommand{declare}\isamarkupfalse%
\ value{\isacharunderscore}gt{\isacharunderscore}def\ {\isacharbrackleft}simp{\isacharbrackright}%
\snip{cointea}{1}{2}{%
\isacommand{definition}\isamarkupfalse%
\ init\ {\isacharcolon}{\isacharcolon}\ transition\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}init\ {\isasymequiv}\ {\isasymlparr}\isanewline
\ \ \ \ \ \ \ \ \ \ Label\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Arity\ {\isacharequal}\ {\isadigit{0}}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Guards\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Outputs\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Updates\ {\isacharequal}\ {\isacharbrackleft}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}\ {\isacharparenleft}L\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbrackright}\isanewline
\ \ \ \ \ \ \ \ {\isasymrparr}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ coin\ {\isacharcolon}{\isacharcolon}\ transition\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}coin\ {\isasymequiv}\ {\isasymlparr}\isanewline
\ \ \ \ \ \ \ \ \ \ Label\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Arity\ {\isacharequal}\ {\isadigit{0}}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Guards\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Outputs\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Updates\ {\isacharequal}\ {\isacharbrackleft}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}\ {\isacharparenleft}Plus\ {\isacharparenleft}V\ {\isacharparenleft}R\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}L\ {\isacharparenleft}Num\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharbrackright}\isanewline
\ \ \ \ \ \ \ \ {\isasymrparr}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ vend\ {\isacharcolon}{\isacharcolon}\ transition\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}vend\ {\isasymequiv}\ {\isasymlparr}\isanewline
\ \ \ \ \ \ \ \ \ \ Label\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Arity\ {\isacharequal}\ {\isadigit{0}}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Guards\ {\isacharequal}\ {\isacharbrackleft}Gt\ {\isacharparenleft}V\ {\isacharparenleft}R\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}L\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Outputs\ {\isacharequal}\ {\isacharbrackleft}L\ {\isacharparenleft}Str\ {\isacharprime}{\isacharprime}tea{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharbrackright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ Updates\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}\isanewline
\ \ \ \ \ \ \ \ {\isasymrparr}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ drinks\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}drinks\ {\isasymequiv}\ {\isacharbraceleft}{\isacharbar}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharparenleft}{\isadigit{0}}{\isacharcomma}{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ init{\isacharparenright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}{\isadigit{1}}{\isacharparenright}{\isacharcomma}\ coin{\isacharparenright}{\isacharcomma}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharparenright}{\isacharcomma}\ vend{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}%
}%endsnip
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ drinks\ {\isadigit{0}}\ {\isacharless}{\isachargreater}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}\ init{\isacharparenright}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}alt\ Abs{\isacharunderscore}ffilter\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}\ init{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ {\isacharparenleft}a\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isasymand}\ b\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\ possible{\isacharunderscore}steps\ drinks\ {\isadigit{0}}\ {\isacharless}{\isachargreater}\ a\ b\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ Abs{\isacharunderscore}ffilter\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ init{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ aux{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}\ state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}fst\ {\isacharparenleft}ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}snd\ {\isacharparenleft}snd\ {\isacharparenleft}ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ p\ {\isacharparenleft}stl\ t{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharminus}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}a\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isasymand}\ b\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ make{\isacharunderscore}full{\isacharunderscore}obs{\isacharunderscore}neq{\isacharcolon}\ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}fst\ {\isacharparenleft}ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}snd\ {\isacharparenleft}snd\ {\isacharparenleft}ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ p\ {\isacharparenleft}stl\ t{\isacharparenright}\ {\isasymnoteq}\isanewline
\ \ \ \ make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ p\ t{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharparenleft}shd\ t{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}aa\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isasymand}\ ba\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ init{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ make{\isacharunderscore}full{\isacharunderscore}observation{\isachardot}simps{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ option{\isachardot}inject\ state{\isachardot}ext{\isacharunderscore}inject\ zero{\isacharunderscore}neq{\isacharunderscore}one{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ make{\isacharunderscore}full{\isacharunderscore}observation{\isachardot}simps{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ option{\isachardot}simps{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ state{\isachardot}ext{\isacharunderscore}inject{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ state{\isacharunderscore}eq{\isacharunderscore}alt{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}state{\isacharunderscore}eq\ s{\isacharparenright}\ s{\isacharprime}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ shd\ x\ {\isacharequal}\ s{\isacharparenright}\ {\isacharparenleft}smap\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ statename\ x{\isacharparenright}\ s{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ standard\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}iff{\isacharunderscore}sdrop{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}mono\ alw{\isacharunderscore}smap{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}alw\ {\isacharparenleft}nxt\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}\ impl\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}a\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isasymand}\ b\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \ \ \isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}not{\isacharunderscore}init{\isacharcolon}{\isachardoublequoteopen}t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\ possible{\isacharunderscore}steps\ drinks\ {\isadigit{0}}\ r\ {\isacharparenleft}fst\ t{\isacharparenright}\ {\isacharparenleft}snd\ t{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ init{\isacharunderscore}def\ length{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}conv\ less{\isacharunderscore}numeral{\isacharunderscore}extra{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ prod{\isachardot}collapse\ transition{\isachardot}ext{\isacharunderscore}inject\ transition{\isachardot}surjective{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ step{\isacharunderscore}not{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\ ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ r\ t\ {\isacharequal}\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}not{\isacharunderscore}init\ ltl{\isacharunderscore}step{\isacharunderscore}none\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}coin{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ r\ STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}\ coin{\isacharparenright}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}alt\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}\ vend{\isacharunderscore}def\ coin{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}vend{\isacharunderscore}insufficient{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isasymle}\ {\isadigit{0}}\ {\isasymLongrightarrow}\ possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}\ vend{\isacharunderscore}def\ coin{\isacharunderscore}def\ apply{\isacharunderscore}guards{\isacharunderscore}def\ join{\isacharunderscore}ir{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}vend{\isacharunderscore}sufficient{\isacharcolon}\ {\isachardoublequoteopen}n\ {\isachargreater}\ {\isadigit{0}}\ {\isasymLongrightarrow}\ possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharparenleft}{\isadigit{2}}{\isacharcomma}\ vend{\isacharparenright}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}alt\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}\ vend{\isacharunderscore}def\ coin{\isacharunderscore}def\ apply{\isacharunderscore}guards{\isacharunderscore}def\ join{\isacharunderscore}ir{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ invalid{\isacharunderscore}possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{1}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ r\ {\isacharparenleft}fst\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}snd\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ drinks{\isacharunderscore}def\ Set{\isachardot}filter{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ coin{\isacharunderscore}def\ length{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}conv\ prod{\isachardot}collapse\ transition{\isachardot}ext{\isacharunderscore}inject\ transition{\isachardot}surjective\ vend{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ updates{\isacharunderscore}vend{\isacharcolon}\ {\isachardoublequoteopen}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ vend{\isacharparenright}\ i\ r\ {\isacharequal}\ r{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ vend{\isacharunderscore}def\ apply{\isacharunderscore}updates{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ less{\isacharunderscore}than{\isacharunderscore}zero{\isacharunderscore}not{\isacharunderscore}nxt{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}n\ {\isasymle}\ {\isadigit{0}}\ {\isasymLongrightarrow}\isanewline
\ \ \ statename\ {\isacharparenleft}shd\ {\isacharparenleft}stl\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{1}}{\isacharparenright}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ Some\ {\isadigit{2}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}coin{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}vend{\isacharunderscore}insufficient{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ invalid{\isacharunderscore}possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{1}}\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ drinks\ {\isadigit{2}}\ r\ {\isacharparenleft}fst\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}snd\ {\isacharparenleft}shd\ t{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ shd{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ n\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ trilean{\isachardot}true{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ None\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ nxt{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ n\ {\isasymLongrightarrow}\ nxt\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ trilean{\isachardot}true{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ None\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}remains{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ n\ {\isasymLongrightarrow}\ alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ trilean{\isachardot}true{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ None\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}iff{\isacharunderscore}sdrop{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}null{\isacharunderscore}remains{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ trilean{\isachardot}true{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ None\ {\isacharless}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}iff{\isacharunderscore}sdrop{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ stop{\isacharunderscore}at{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ n\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ trilean{\isachardot}true{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}alt\ once{\isacharunderscore}none{\isacharunderscore}remains{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero\ possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ next{\isacharunderscore}not{\isacharunderscore}lt{\isacharunderscore}zero{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}n\ {\isasymge}\ {\isadigit{0}}\ {\isasymLongrightarrow}\isanewline
\ \ \ {\isacharparenleft}nxt\ {\isacharparenleft}not\ \isanewline
\ \ \ \ {\isacharparenleft}check{\isacharunderscore}exp\ {\isacharparenleft}Lt\ {\isacharparenleft}V\ {\isacharparenleft}Rg\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}L\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ {\isacharparenright}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{1}}{\isacharparenright}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ n{\isacharparenright}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}n\ {\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}vend{\isacharunderscore}insufficient\ Lt{\isacharunderscore}def\ join{\isacharunderscore}iro{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}vend{\isacharunderscore}sufficient\ updates{\isacharunderscore}vend\ Lt{\isacharunderscore}def\ join{\isacharunderscore}iro{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}coin\ datastate\ coin{\isacharunderscore}def\ value{\isacharunderscore}plus{\isacharunderscore}def\ Lt{\isacharunderscore}def\ join{\isacharunderscore}iro{\isacharunderscore}def\ apply{\isacharunderscore}updates{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Lt{\isacharunderscore}def\ invalid{\isacharunderscore}possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{1}}\ ltl{\isacharunderscore}step{\isacharunderscore}alt\ join{\isacharunderscore}iro{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ not{\isacharunderscore}initialised{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{1}}{\isacharparenright}\ xs\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ MaybeBoolInt\ {\isacharparenleft}{\isacharless}{\isacharparenright}\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isachardollar}\ {\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ trilean{\isachardot}true\ {\isasymand}\ label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ xs\ {\isasymand}\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}\ xs\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}\ {\isacharparenleft}stl\ xs{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ None\ {\isacharless}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none\ state{\isacharunderscore}eq{\isacharunderscore}None{\isacharunderscore}not{\isacharunderscore}Some\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}iff{\isacharunderscore}sdrop{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ implode{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}String{\isachardot}implode\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Literal{\isachardot}rep{\isacharunderscore}eq\ String{\isachardot}implode{\isacharunderscore}explode{\isacharunderscore}eq\ zero{\isacharunderscore}literal{\isachardot}rep{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ not{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymnot}\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ implode{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ prod{\isachardot}collapse{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ implode{\isacharunderscore}vend{\isacharcolon}\ {\isachardoublequoteopen}String{\isachardot}implode\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Literal{\isachardot}rep{\isacharunderscore}eq\ String{\isachardot}implode{\isacharunderscore}explode{\isacharunderscore}eq\ zero{\isacharunderscore}literal{\isachardot}rep{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ implode{\isacharunderscore}coin{\isacharcolon}\ {\isachardoublequoteopen}String{\isachardot}implode\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Literal{\isachardot}rep{\isacharunderscore}eq\ String{\isachardot}implode{\isacharunderscore}explode{\isacharunderscore}eq\ zero{\isacharunderscore}literal{\isachardot}rep{\isacharunderscore}eq{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ step{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}vend{\isacharcolon}\ {\isachardoublequoteopen}fst\ e\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ {\isasymLongrightarrow}\ ltl{\isacharunderscore}step\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ r\ e\ {\isacharequal}\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ Abs{\isacharunderscore}ffilter\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ init{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}label{\isacharunderscore}vend{\isacharunderscore}not{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}\ impl\ {\isacharparenleft}not\ {\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ only{\isacharcolon}\ watch{\isacharunderscore}label\ implode{\isacharunderscore}vend\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ step{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}vend{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none{\isacharbrackleft}of\ drinks{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}iff{\isacharunderscore}sdrop{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{0}}{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ drinks\ {\isadigit{0}}\ {\isacharless}{\isachargreater}\ l\ i\ {\isacharequal}\ finsert\ x\ S{\isacharprime}\ {\isasymLongrightarrow}\ finsert\ x\ S{\isacharprime}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharparenleft}{\isadigit{1}}{\isacharcomma}\ init{\isacharparenright}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}l\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}i\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ vend{\isacharunderscore}insufficient{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isachargreater}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ i\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ Set{\isachardot}filter{\isacharunderscore}def\ drinks{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ coin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ vend{\isacharunderscore}def\ apply{\isacharunderscore}guards{\isacharunderscore}def\ join{\isacharunderscore}ir{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ updates{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ init{\isacharparenright}\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ None{\isacharparenright}\ {\isacharless}{\isachargreater}\ {\isacharequal}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isachargreater}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ init{\isacharunderscore}def\ apply{\isacharunderscore}updates{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}aux{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}nxt\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\ impl\ not\ {\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ implode{\isacharunderscore}vend\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init\ alw{\isacharunderscore}not{\isacharunderscore}some\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ step{\isacharunderscore}not{\isacharunderscore}init\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ updates{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ disjI{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ vend{\isacharunderscore}insufficient{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ disjI{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ alw{\isacharunderscore}not{\isacharunderscore}some\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ltl{\isacharunderscore}step{\isacharunderscore}alt\ vend{\isacharunderscore}insufficient{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\snip{checkinit}{1}{2}{%
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}init{\isacharunderscore}makes{\isacharunderscore}r{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}zero{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}\ aand\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ impl\isanewline
\ \ \ \ {\isacharparenleft}nxt\ {\isacharparenleft}check{\isacharunderscore}exp\ {\isacharparenleft}Eq\ {\isacharparenleft}V\ {\isacharparenleft}Rg\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}L\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}%
}%endsnip
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ updates{\isacharunderscore}init\ join{\isacharunderscore}iro{\isacharunderscore}def\ implode{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}init\ implode{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ prod{\isachardot}collapse{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}wrong{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}not\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ suntil\ label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\ suntil\ state{\isacharunderscore}eq\ None{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ shd{\isacharunderscore}not{\isacharunderscore}init{\isacharcolon}\ {\isachardoublequoteopen}shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymnot}\ ev\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ Some\ {\isadigit{2}}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ p\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init\ alw{\isacharunderscore}not{\isacharunderscore}some{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ vend{\isacharunderscore}gets{\isacharunderscore}stuck{\isacharcolon}\ {\isachardoublequoteopen}stl\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isacharhash}{\isacharhash}\ x{\isadigit{2}}\ {\isasymLongrightarrow}\ {\isasymnot}ev\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ Some\ {\isadigit{2}}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{1}}{\isacharparenright}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isachargreater}\ p\ {\isacharparenleft}{\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isacharhash}{\isacharhash}\ x{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ vend{\isacharunderscore}insufficient\ alw{\isacharunderscore}not{\isacharunderscore}some{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}invalid{\isacharcolon}\ {\isachardoublequoteopen}x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ possible{\isacharunderscore}steps\ drinks\ {\isadigit{1}}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isachargreater}\ {\isacharparenleft}fst\ x{\isadigit{1}}{\isacharparenright}\ {\isacharparenleft}snd\ x{\isadigit{1}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}def\ ffilter{\isacharunderscore}def\ fset{\isacharunderscore}both{\isacharunderscore}sides\ Abs{\isacharunderscore}fset{\isacharunderscore}inverse\ drinks{\isacharunderscore}def\ Set{\isachardot}filter{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ safe\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ coin{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ prod{\isachardot}collapse{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ vend{\isacharunderscore}def\ apply{\isacharunderscore}guards{\isacharunderscore}def\ join{\isacharunderscore}ir{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ invalid{\isacharunderscore}gets{\isacharunderscore}stuck{\isacharcolon}\ {\isachardoublequoteopen}x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x{\isadigit{1}}\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymnot}ev\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ Some\ {\isadigit{2}}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ drinks\ {\isacharparenleft}Some\ {\isadigit{1}}{\isacharparenright}\ {\isacharless}{\isadigit{1}}\ {\isachardollar}{\isacharcolon}{\isacharequal}\ Some\ {\isacharparenleft}Num\ {\isadigit{0}}{\isacharparenright}{\isachargreater}\ p\ {\isacharparenleft}x{\isadigit{1}}\ {\isacharhash}{\isacharhash}\ x{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}invalid\ alw{\isacharunderscore}not{\isacharunderscore}some\ ltl{\isacharunderscore}step{\isacharunderscore}alt{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}vend{\isacharunderscore}no{\isacharunderscore}coin{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}nxt\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ aand\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isacharparenright}\ impl\ not\ {\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharunderscore}iff\ implode{\isacharunderscore}vend{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ alw\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ disjI{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharbrackleft}symmetric{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ shd{\isacharunderscore}not{\isacharunderscore}init\ \isacommand{apply}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ apply{\isacharunderscore}updates{\isacharunderscore}def\ apply{\isacharunderscore}outputs{\isacharunderscore}def\ init{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ disjI{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ t{\isacharcomma}\ case{\isacharunderscore}tac\ x{\isadigit{2}}{\isacharcomma}\ case{\isacharunderscore}tac\ x{\isadigit{1}}a{\isacharcomma}\ clarsimp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharbrackleft}symmetric{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ stream{\isachardot}sel{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ vend{\isacharunderscore}gets{\isacharunderscore}stuck\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}invalid{\isacharunderscore}gets{\isacharunderscore}stuck{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}{\isacharparenleft}nxt\ {\isacharparenleft}not\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}\ aand\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ aand\isanewline
\ \ \ {\isacharparenleft}nxt\ {\isacharparenleft}not\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}\ aand\ input{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ impl\isanewline
\ \ \ {\isacharparenleft}not\ {\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ implode{\isacharunderscore}coin\ implode{\isacharunderscore}vend{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isasymnoteq}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}not{\isacharunderscore}init\ alw{\isacharunderscore}not{\isacharunderscore}some\ alw{\isacharunderscore}ev\ shd{\isacharunderscore}not{\isacharunderscore}init{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ t{\isacharcomma}\ case{\isacharunderscore}tac\ x{\isadigit{2}}{\isacharcomma}\ simp{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ impI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}coinduction{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ apply{\isacharunderscore}updates{\isacharunderscore}def\ init{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ disjI{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ not{\isacharunderscore}ev{\isacharbrackleft}symmetric{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ invalid{\isacharunderscore}gets{\isacharunderscore}stuck\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\snip{mustpaycorrect}{1}{2}{%
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}correct{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ impl\isanewline
\ \ \ \ {\isacharparenleft}not\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}\ suntil\ label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ suntil{\isachardot}step{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ LTL{\isacharunderscore}label{\isacharunderscore}vend{\isacharunderscore}not{\isacharunderscore}{\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ {\isacharparenleft}stl\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ implode{\isacharunderscore}coin\ suntil{\isachardot}base{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ {\isacharparenleft}stl\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ suntil{\isachardot}step{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ LTL{\isacharunderscore}aux{\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ LTL{\isacharunderscore}aux{\isadigit{2}}\ implode{\isacharunderscore}vend\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ev{\isachardot}simps{\isacharbrackleft}of\ {\isacharunderscore}\ {\isachardoublequoteopen}watch\ drinks\ t{\isachardoublequoteclose}{\isacharbrackright}\ implode{\isacharunderscore}coin\ implode{\isacharunderscore}vend{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}shd\ t\ {\isacharequal}\ {\isacharparenleft}STR\ {\isacharprime}{\isacharprime}init{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ possible{\isacharunderscore}steps{\isacharunderscore}init\ apply{\isacharunderscore}updates{\isacharunderscore}def\ init{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ invalid{\isacharunderscore}gets{\isacharunderscore}stuck\ stream{\isachardot}collapse{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ shd{\isacharunderscore}not{\isacharunderscore}init\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
}%endsnip
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}correct{\isacharunderscore}bracketed{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}ev\ {\isacharparenleft}state{\isacharunderscore}eq\ {\isacharparenleft}Some\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ impl\isanewline
\ \ \ \ {\isacharparenleft}{\isacharparenleft}not\ {\isacharparenleft}label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\ suntil\ label{\isacharunderscore}eq\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}correct\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\snip{mustpaycorrectfull}{1}{2}{%
\isacommand{lemma}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}correct{\isacharunderscore}full{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}ev\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ Some\ {\isadigit{2}}{\isacharparenright}\ impl\isanewline
\ \ \ {\isacharparenleft}{\isacharparenleft}{\isasymlambda}xs{\isachardot}\ fst\ {\isacharparenleft}action\ {\isacharparenleft}shd\ xs{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ STR\ {\isacharprime}{\isacharprime}vend{\isacharprime}{\isacharprime}{\isacharparenright}\ suntil\isanewline
\ \ \ \ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ fst\ {\isacharparenleft}action\ {\isacharparenleft}shd\ xs{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ STR\ {\isacharprime}{\isacharprime}coin{\isacharprime}{\isacharprime}{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ {\isacharparenleft}watch\ drinks\ t{\isacharparenright}{\isachardoublequoteclose}%
}%endsnip
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ LTL{\isacharunderscore}must{\isacharunderscore}pay{\isacharunderscore}correct{\isacharbrackleft}of\ t{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ implode{\isacharunderscore}coin\ implode{\isacharunderscore}vend\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/Documents/efsm-sal/coin-tea/theories/Coin_Tea.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%18=3%:%
%:%21=4%:%
%:%22=5%:%
%:%23=5%:%
%:%24=6%:%
%:%25=6%:%
%:%26=8%:%
%:%27=9%:%
%:%28=9%:%
%:%29=10%:%
%:%35=16%:%
%:%36=17%:%
%:%37=18%:%
%:%38=18%:%
%:%39=19%:%
%:%45=25%:%
%:%46=26%:%
%:%47=27%:%
%:%48=27%:%
%:%49=28%:%
%:%55=34%:%
%:%56=35%:%
%:%57=36%:%
%:%58=36%:%
%:%59=37%:%
%:%64=42%:%
%:%65=44%:%
%:%66=44%:%
%:%69=45%:%
%:%73=45%:%
%:%74=45%:%
%:%75=46%:%
%:%76=46%:%
%:%77=47%:%
%:%78=47%:%
%:%83=47%:%
%:%86=48%:%
%:%87=49%:%
%:%88=49%:%
%:%91=50%:%
%:%95=50%:%
%:%96=50%:%
%:%97=51%:%
%:%98=51%:%
%:%99=52%:%
%:%100=52%:%
%:%105=52%:%
%:%108=53%:%
%:%109=54%:%
%:%110=54%:%
%:%112=56%:%
%:%119=57%:%
%:%120=57%:%
%:%121=58%:%
%:%122=58%:%
%:%123=59%:%
%:%124=59%:%
%:%125=60%:%
%:%126=60%:%
%:%127=61%:%
%:%128=61%:%
%:%129=62%:%
%:%130=62%:%
%:%131=63%:%
%:%132=63%:%
%:%133=64%:%
%:%139=64%:%
%:%142=65%:%
%:%143=66%:%
%:%144=66%:%
%:%146=68%:%
%:%149=69%:%
%:%153=69%:%
%:%154=69%:%
%:%155=70%:%
%:%156=70%:%
%:%157=71%:%
%:%158=71%:%
%:%159=72%:%
%:%160=72%:%
%:%161=73%:%
%:%162=73%:%
%:%163=74%:%
%:%164=74%:%
%:%165=75%:%
%:%166=75%:%
%:%167=76%:%
%:%168=76%:%
%:%173=76%:%
%:%176=77%:%
%:%177=78%:%
%:%178=78%:%
%:%181=79%:%
%:%185=79%:%
%:%186=79%:%
%:%187=80%:%
%:%188=80%:%
%:%189=81%:%
%:%190=81%:%
%:%195=81%:%
%:%198=82%:%
%:%199=83%:%
%:%200=83%:%
%:%207=84%:%
%:%208=84%:%
%:%209=85%:%
%:%210=85%:%
%:%211=86%:%
%:%212=86%:%
%:%213=86%:%
%:%214=87%:%
%:%215=87%:%
%:%216=88%:%
%:%217=88%:%
%:%218=89%:%
%:%219=89%:%
%:%220=90%:%
%:%221=90%:%
%:%222=91%:%
%:%228=91%:%
%:%231=92%:%
%:%232=93%:%
%:%233=93%:%
%:%236=94%:%
%:%240=94%:%
%:%241=94%:%
%:%242=95%:%
%:%243=95%:%
%:%248=95%:%
%:%251=96%:%
%:%252=97%:%
%:%253=97%:%
%:%256=98%:%
%:%260=98%:%
%:%261=98%:%
%:%262=99%:%
%:%263=99%:%
%:%268=99%:%
%:%271=100%:%
%:%272=101%:%
%:%273=101%:%
%:%276=102%:%
%:%280=102%:%
%:%281=102%:%
%:%282=103%:%
%:%283=103%:%
%:%284=104%:%
%:%285=104%:%
%:%290=104%:%
%:%293=105%:%
%:%294=106%:%
%:%295=106%:%
%:%298=107%:%
%:%302=107%:%
%:%303=107%:%
%:%304=108%:%
%:%305=108%:%
%:%306=109%:%
%:%307=109%:%
%:%312=109%:%
%:%315=110%:%
%:%316=111%:%
%:%317=111%:%
%:%320=112%:%
%:%324=112%:%
%:%325=112%:%
%:%326=113%:%
%:%327=113%:%
%:%328=114%:%
%:%329=114%:%
%:%334=114%:%
%:%337=115%:%
%:%338=116%:%
%:%339=116%:%
%:%340=117%:%
%:%342=119%:%
%:%345=120%:%
%:%349=120%:%
%:%350=120%:%
%:%351=121%:%
%:%352=121%:%
%:%357=121%:%
%:%360=122%:%
%:%361=123%:%
%:%362=123%:%
%:%365=124%:%
%:%369=124%:%
%:%370=124%:%
%:%375=124%:%
%:%378=125%:%
%:%379=126%:%
%:%380=126%:%
%:%381=127%:%
%:%382=128%:%
%:%385=129%:%
%:%389=129%:%
%:%390=129%:%
%:%391=130%:%
%:%392=130%:%
%:%393=131%:%
%:%394=131%:%
%:%395=132%:%
%:%396=132%:%
%:%397=133%:%
%:%398=133%:%
%:%403=133%:%
%:%406=134%:%
%:%407=135%:%
%:%408=135%:%
%:%411=136%:%
%:%415=136%:%
%:%416=136%:%
%:%421=136%:%
%:%424=137%:%
%:%425=138%:%
%:%426=138%:%
%:%429=139%:%
%:%433=139%:%
%:%434=139%:%
%:%439=139%:%
%:%442=140%:%
%:%443=141%:%
%:%444=141%:%
%:%447=142%:%
%:%451=142%:%
%:%452=142%:%
%:%457=142%:%
%:%460=143%:%
%:%461=144%:%
%:%462=144%:%
%:%465=145%:%
%:%469=145%:%
%:%470=145%:%
%:%471=146%:%
%:%472=146%:%
%:%477=146%:%
%:%480=147%:%
%:%481=148%:%
%:%482=148%:%
%:%485=149%:%
%:%489=149%:%
%:%490=149%:%
%:%491=150%:%
%:%492=150%:%
%:%497=150%:%
%:%500=151%:%
%:%501=152%:%
%:%502=152%:%
%:%503=153%:%
%:%510=154%:%
%:%511=154%:%
%:%512=155%:%
%:%513=155%:%
%:%514=156%:%
%:%515=156%:%
%:%516=156%:%
%:%517=157%:%
%:%518=157%:%
%:%519=157%:%
%:%520=158%:%
%:%526=158%:%
%:%529=159%:%
%:%530=160%:%
%:%531=160%:%
%:%532=161%:%
%:%535=164%:%
%:%538=165%:%
%:%542=165%:%
%:%543=165%:%
%:%544=166%:%
%:%545=166%:%
%:%546=167%:%
%:%547=167%:%
%:%548=168%:%
%:%549=168%:%
%:%550=169%:%
%:%551=169%:%
%:%552=170%:%
%:%553=170%:%
%:%554=171%:%
%:%555=171%:%
%:%556=172%:%
%:%557=172%:%
%:%562=172%:%
%:%565=173%:%
%:%566=174%:%
%:%567=174%:%
%:%570=177%:%
%:%573=178%:%
%:%577=178%:%
%:%578=178%:%
%:%579=179%:%
%:%580=179%:%
%:%585=179%:%
%:%588=180%:%
%:%589=181%:%
%:%590=181%:%
%:%593=182%:%
%:%597=182%:%
%:%598=182%:%
%:%603=182%:%
%:%606=183%:%
%:%607=184%:%
%:%608=184%:%
%:%609=185%:%
%:%612=186%:%
%:%616=186%:%
%:%617=186%:%
%:%618=187%:%
%:%619=187%:%
%:%624=187%:%
%:%627=188%:%
%:%628=189%:%
%:%629=189%:%
%:%632=190%:%
%:%636=190%:%
%:%637=190%:%
%:%642=190%:%
%:%645=191%:%
%:%646=192%:%
%:%647=192%:%
%:%650=193%:%
%:%654=193%:%
%:%655=193%:%
%:%660=193%:%
%:%663=194%:%
%:%664=195%:%
%:%665=195%:%
%:%668=196%:%
%:%672=196%:%
%:%673=196%:%
%:%674=197%:%
%:%675=197%:%
%:%676=198%:%
%:%677=198%:%
%:%678=199%:%
%:%679=199%:%
%:%684=199%:%
%:%687=200%:%
%:%688=201%:%
%:%689=201%:%
%:%692=202%:%
%:%696=202%:%
%:%697=202%:%
%:%698=203%:%
%:%699=203%:%
%:%700=204%:%
%:%701=204%:%
%:%702=205%:%
%:%703=205%:%
%:%704=206%:%
%:%705=206%:%
%:%706=207%:%
%:%707=207%:%
%:%708=207%:%
%:%709=208%:%
%:%710=208%:%
%:%711=209%:%
%:%712=209%:%
%:%713=210%:%
%:%714=210%:%
%:%715=211%:%
%:%716=211%:%
%:%717=212%:%
%:%723=212%:%
%:%726=213%:%
%:%727=214%:%
%:%728=214%:%
%:%731=215%:%
%:%735=215%:%
%:%736=215%:%
%:%737=216%:%
%:%738=216%:%
%:%739=217%:%
%:%740=217%:%
%:%741=218%:%
%:%742=218%:%
%:%743=219%:%
%:%744=219%:%
%:%749=219%:%
%:%752=220%:%
%:%753=221%:%
%:%754=221%:%
%:%757=222%:%
%:%761=222%:%
%:%762=222%:%
%:%763=223%:%
%:%764=223%:%
%:%765=224%:%
%:%766=224%:%
%:%767=225%:%
%:%768=225%:%
%:%773=225%:%
%:%776=226%:%
%:%777=227%:%
%:%778=227%:%
%:%781=228%:%
%:%785=228%:%
%:%786=228%:%
%:%791=228%:%
%:%794=229%:%
%:%795=230%:%
%:%796=230%:%
%:%799=231%:%
%:%803=231%:%
%:%804=231%:%
%:%805=232%:%
%:%806=232%:%
%:%807=233%:%
%:%808=233%:%
%:%809=234%:%
%:%810=234%:%
%:%811=235%:%
%:%812=235%:%
%:%813=235%:%
%:%814=236%:%
%:%815=236%:%
%:%816=237%:%
%:%817=237%:%
%:%818=238%:%
%:%819=238%:%
%:%820=239%:%
%:%821=239%:%
%:%822=240%:%
%:%823=240%:%
%:%824=240%:%
%:%825=241%:%
%:%826=241%:%
%:%827=242%:%
%:%828=242%:%
%:%829=243%:%
%:%830=243%:%
%:%831=244%:%
%:%832=244%:%
%:%833=245%:%
%:%834=245%:%
%:%835=245%:%
%:%836=246%:%
%:%837=246%:%
%:%838=247%:%
%:%839=247%:%
%:%840=248%:%
%:%841=248%:%
%:%842=249%:%
%:%843=249%:%
%:%844=250%:%
%:%845=250%:%
%:%846=251%:%
%:%855=253%:%
%:%856=254%:%
%:%857=254%:%
%:%858=255%:%
%:%861=258%:%
%:%864=259%:%
%:%868=259%:%
%:%869=259%:%
%:%870=260%:%
%:%871=260%:%
%:%872=261%:%
%:%873=261%:%
%:%874=262%:%
%:%875=262%:%
%:%882=262%:%
%:%883=263%:%
%:%884=264%:%
%:%885=265%:%
%:%886=265%:%
%:%889=266%:%
%:%893=266%:%
%:%899=266%:%
%:%902=267%:%
%:%903=268%:%
%:%904=268%:%
%:%907=269%:%
%:%911=269%:%
%:%912=269%:%
%:%913=270%:%
%:%914=270%:%
%:%915=271%:%
%:%916=271%:%
%:%917=272%:%
%:%918=272%:%
%:%919=272%:%
%:%920=273%:%
%:%921=273%:%
%:%922=274%:%
%:%923=274%:%
%:%924=275%:%
%:%925=275%:%
%:%926=276%:%
%:%927=276%:%
%:%928=277%:%
%:%934=277%:%
%:%937=278%:%
%:%938=279%:%
%:%939=279%:%
%:%942=280%:%
%:%946=280%:%
%:%947=280%:%
%:%948=281%:%
%:%949=281%:%
%:%950=282%:%
%:%951=282%:%
%:%952=283%:%
%:%953=283%:%
%:%954=283%:%
%:%955=284%:%
%:%956=284%:%
%:%957=285%:%
%:%963=285%:%
%:%966=286%:%
%:%967=287%:%
%:%968=287%:%
%:%970=289%:%
%:%973=290%:%
%:%977=290%:%
%:%978=290%:%
%:%979=291%:%
%:%980=291%:%
%:%981=292%:%
%:%982=292%:%
%:%983=293%:%
%:%984=293%:%
%:%985=294%:%
%:%986=294%:%
%:%991=294%:%
%:%994=295%:%
%:%995=296%:%
%:%996=296%:%
%:%998=298%:%
%:%1001=299%:%
%:%1005=299%:%
%:%1006=299%:%
%:%1007=300%:%
%:%1008=300%:%
%:%1009=301%:%
%:%1010=301%:%
%:%1011=302%:%
%:%1012=302%:%
%:%1013=302%:%
%:%1014=303%:%
%:%1015=303%:%
%:%1016=304%:%
%:%1022=304%:%
%:%1025=305%:%
%:%1026=306%:%
%:%1027=306%:%
%:%1030=307%:%
%:%1034=307%:%
%:%1035=307%:%
%:%1036=308%:%
%:%1037=308%:%
%:%1038=309%:%
%:%1039=309%:%
%:%1040=310%:%
%:%1041=310%:%
%:%1042=311%:%
%:%1043=311%:%
%:%1044=311%:%
%:%1045=312%:%
%:%1046=312%:%
%:%1047=313%:%
%:%1048=313%:%
%:%1049=314%:%
%:%1050=314%:%
%:%1051=315%:%
%:%1052=315%:%
%:%1053=316%:%
%:%1054=316%:%
%:%1055=316%:%
%:%1056=317%:%
%:%1057=317%:%
%:%1058=318%:%
%:%1059=318%:%
%:%1060=319%:%
%:%1061=319%:%
%:%1062=320%:%
%:%1063=320%:%
%:%1064=321%:%
%:%1065=321%:%
%:%1066=321%:%
%:%1067=322%:%
%:%1073=322%:%
%:%1076=323%:%
%:%1077=324%:%
%:%1078=324%:%
%:%1079=325%:%
%:%1081=327%:%
%:%1084=328%:%
%:%1088=328%:%
%:%1089=328%:%
%:%1090=329%:%
%:%1091=329%:%
%:%1092=330%:%
%:%1093=330%:%
%:%1094=331%:%
%:%1095=331%:%
%:%1096=332%:%
%:%1097=332%:%
%:%1098=333%:%
%:%1099=333%:%
%:%1100=334%:%
%:%1101=334%:%
%:%1102=335%:%
%:%1103=335%:%
%:%1104=336%:%
%:%1105=336%:%
%:%1106=337%:%
%:%1107=337%:%
%:%1108=338%:%
%:%1109=338%:%
%:%1110=338%:%
%:%1118=343%:%
%:%1119=344%:%
%:%1120=344%:%
%:%1121=345%:%
%:%1123=347%:%
%:%1126=348%:%
%:%1130=348%:%
%:%1131=348%:%
%:%1132=349%:%
%:%1133=349%:%
%:%1134=350%:%
%:%1135=350%:%
%:%1136=350%:%
%:%1137=351%:%
%:%1138=351%:%
%:%1139=352%:%
%:%1140=352%:%
%:%1141=353%:%
%:%1142=353%:%
%:%1143=354%:%
%:%1144=354%:%
%:%1145=355%:%
%:%1146=355%:%
%:%1147=355%:%
%:%1148=356%:%
%:%1149=356%:%
%:%1150=356%:%
%:%1151=357%:%
%:%1152=358%:%
%:%1153=358%:%
%:%1154=359%:%
%:%1155=359%:%
%:%1156=360%:%
%:%1157=360%:%
%:%1158=361%:%
%:%1159=361%:%
%:%1160=362%:%
%:%1161=362%:%
%:%1162=362%:%
%:%1170=363%:%
%:%1171=366%:%
%:%1172=366%:%
%:%1173=367%:%
%:%1175=369%:%
%:%1178=370%:%
%:%1182=370%:%
%:%1183=370%:%
%:%1184=370%:%
%:%1192=372%:%
%:%1193=373%:%
%:%1194=373%:%
%:%1195=374%:%
%:%1199=378%:%
%:%1202=379%:%
%:%1206=379%:%
%:%1207=379%:%
%:%1208=380%:%
%:%1209=380%:%
%:%1210=380%:%
%:%1217=380%:%
%:%1220=381%:%
%:%1225=382%:%