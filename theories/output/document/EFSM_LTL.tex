%
\begin{isabellebody}%
\setisabellecontext{EFSM{\isacharunderscore}LTL}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ EFSM{\isacharunderscore}LTL\isanewline
\isakeyword{imports}\ {\isachardoublequoteopen}EFSM{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Linear{\isacharunderscore}Temporal{\isacharunderscore}Logic{\isacharunderscore}on{\isacharunderscore}Streams{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isacommand{datatype}\isamarkupfalse%
\ ior\ {\isacharequal}\ ip\ {\isacharbar}\ op\ {\isacharbar}\ rg\isanewline
\isanewline
\isacommand{record}\isamarkupfalse%
\ state\ {\isacharequal}\isanewline
\ \ statename\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ option{\isachardoublequoteclose}\isanewline
\ \ datastate\ {\isacharcolon}{\isacharcolon}\ registers\isanewline
\ \ event\ {\isacharcolon}{\isacharcolon}\ event\isanewline
\ \ {\isachardoublequoteopen}output{\isachardoublequoteclose}\ {\isacharcolon}{\isacharcolon}\ outputs\isanewline
\isanewline
\isacommand{type{\isacharunderscore}synonym}\isamarkupfalse%
\ property\ {\isacharequal}\ {\isachardoublequoteopen}state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ label\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ {\isasymRightarrow}\ String{\isachardot}literal{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}label\ s\ {\isasymequiv}\ fst\ {\isacharparenleft}event\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ inputs\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ {\isasymRightarrow}\ value\ list{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inputs\ s\ {\isasymequiv}\ snd\ {\isacharparenleft}event\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ ltl{\isacharunderscore}step\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ nat\ option\ {\isasymRightarrow}\ registers\ {\isasymRightarrow}\ event\ {\isasymRightarrow}\ {\isacharparenleft}nat\ option\ {\isasymtimes}\ outputs\ {\isasymtimes}\ registers{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ {\isacharunderscore}\ None\ r\ {\isacharunderscore}\ {\isacharequal}\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ e\ {\isacharparenleft}Some\ s{\isacharparenright}\ r\ {\isacharparenleft}l{\isacharcomma}\ i{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}let\ possibilities\ {\isacharequal}\ possible{\isacharunderscore}steps\ e\ s\ r\ l\ i\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ possibilities\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}\ then\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ t{\isacharparenright}\ {\isacharequal}\ Eps\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ x\ {\isacharbar}{\isasymin}{\isacharbar}\ possibilities{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Some\ s{\isacharprime}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}outputs\ {\isacharparenleft}Outputs\ t{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ i\ r{\isacharparenright}{\isacharparenright}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ t{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ i\ r{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}alt{\isacharcolon}\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ e\ {\isacharparenleft}Some\ s{\isacharparenright}\ r\ t\ {\isacharequal}\ {\isacharparenleft}let\ possibilities\ {\isacharequal}\ possible{\isacharunderscore}steps\ e\ s\ r\ {\isacharparenleft}fst\ t{\isacharparenright}\ {\isacharparenleft}snd\ t{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ possibilities\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}\ then\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Eps\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ x\ {\isacharbar}{\isasymin}{\isacharbar}\ possibilities{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Some\ s{\isacharprime}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}outputs\ {\isacharparenleft}Outputs\ t{\isacharprime}{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ {\isacharparenleft}snd\ t{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ t{\isacharprime}{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ {\isacharparenleft}snd\ t{\isacharparenright}\ r{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ t{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Let{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}possible{\isacharunderscore}steps\ e\ s\ r\ {\isacharparenleft}fst\ ie{\isacharparenright}\ {\isacharparenleft}snd\ ie{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}\ {\isasymLongrightarrow}\ ltl{\isacharunderscore}step\ e\ {\isacharparenleft}Some\ s{\isacharparenright}\ r\ ie\ {\isacharequal}\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ltl{\isacharunderscore}step{\isacharunderscore}alt{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{primcorec}\isamarkupfalse%
\ make{\isacharunderscore}full{\isacharunderscore}observation\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ nat\ option\ {\isasymRightarrow}\ registers\ {\isasymRightarrow}\ event\ stream\ {\isasymRightarrow}\ state\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s\ d\ i\ {\isacharequal}\ {\isacharparenleft}let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ o{\isacharprime}{\isacharcomma}\ d{\isacharprime}{\isacharparenright}\ {\isacharequal}\ ltl{\isacharunderscore}step\ e\ s\ d\ {\isacharparenleft}shd\ i{\isacharparenright}\ in\ {\isasymlparr}statename\ {\isacharequal}\ s{\isacharcomma}\ datastate\ {\isacharequal}\ d{\isacharcomma}\ event{\isacharequal}{\isacharparenleft}shd\ i{\isacharparenright}{\isacharcomma}\ output\ {\isacharequal}\ o{\isacharprime}{\isasymrparr}{\isacharhash}{\isacharhash}{\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s{\isacharprime}\ d{\isacharprime}\ {\isacharparenleft}stl\ i{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ watch\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ event\ stream\ {\isasymRightarrow}\ state\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}watch\ e\ i\ {\isasymequiv}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ i{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ state{\isacharunderscore}eq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ option\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}state{\isacharunderscore}eq\ v\ s\ {\isasymequiv}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ state{\isacharunderscore}eq{\isacharunderscore}None{\isacharunderscore}not{\isacharunderscore}Some{\isacharcolon}\ {\isachardoublequoteopen}state{\isacharunderscore}eq\ None\ s\ {\isasymLongrightarrow}\ {\isasymnot}\ state{\isacharunderscore}eq\ {\isacharparenleft}Some\ n{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}eq{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ label{\isacharunderscore}eq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}string\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}label{\isacharunderscore}eq\ v\ s\ {\isasymequiv}\ fst\ {\isacharparenleft}event\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}String{\isachardot}implode\ v{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ watch{\isacharunderscore}label{\isacharcolon}\ {\isachardoublequoteopen}label{\isacharunderscore}eq\ l\ {\isacharparenleft}watch\ e\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}fst\ {\isacharparenleft}shd\ t{\isacharparenright}\ {\isacharequal}\ String{\isachardot}implode\ l{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ label{\isacharunderscore}eq{\isacharunderscore}def\ watch{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ input{\isacharunderscore}eq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}value\ list\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}input{\isacharunderscore}eq\ v\ s\ {\isasymequiv}\ inputs\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ EventEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}string\ {\isasymtimes}\ inputs{\isacharparenright}\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}EventEq\ e\ {\isacharequal}\ label{\isacharunderscore}eq\ {\isacharparenleft}fst\ e{\isacharparenright}\ aand\ input{\isacharunderscore}eq\ {\isacharparenleft}snd\ e{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ output{\isacharunderscore}eq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}value\ option\ list\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}output{\isacharunderscore}eq\ v\ s\ {\isasymequiv}\ output\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ check{\isacharunderscore}inx\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ior\ {\isasymRightarrow}\ nat\ {\isasymRightarrow}\ {\isacharparenleft}value\ option\ {\isasymRightarrow}\ value\ option\ {\isasymRightarrow}\ trilean{\isacharparenright}\ {\isasymRightarrow}\ value\ option\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}check{\isacharunderscore}inx\ ior{\isachardot}ip\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}Some\ {\isacharparenleft}nth\ {\isacharparenleft}inputs\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}n{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}check{\isacharunderscore}inx\ ior{\isachardot}op\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}nth\ {\isacharparenleft}output\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ n{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}check{\isacharunderscore}inx\ ior{\isachardot}rg\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isachardollar}\ n{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ shd{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}state{\isacharunderscore}eq\ None{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}eq{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ unfold{\isacharunderscore}observe{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ d\ t\ {\isacharequal}\ {\isacharparenleft}{\isasymlparr}statename\ {\isacharequal}\ None{\isacharcomma}\ datastate\ {\isacharequal}\ d{\isacharcomma}\ event{\isacharequal}{\isacharparenleft}shd\ t{\isacharparenright}{\isacharcomma}\ output\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isasymrparr}{\isacharhash}{\isacharhash}{\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ d\ {\isacharparenleft}stl\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ stream{\isachardot}expand{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}state{\isacharunderscore}eq\ None{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}eq{\isacharunderscore}def\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}output{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}output{\isacharunderscore}eq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ output{\isacharunderscore}eq{\isacharunderscore}def\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ datastate\ {\isacharparenleft}shd\ x{\isacharparenright}\ {\isacharequal}\ r{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none{\isacharunderscore}individual{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}check{\isacharunderscore}inx\ rg\ n\ value{\isacharunderscore}eq\ {\isacharparenleft}r\ {\isachardollar}\ n{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ event{\isacharunderscore}components{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}label{\isacharunderscore}eq\ l\ aand\ input{\isacharunderscore}eq\ i{\isacharparenright}\ s\ {\isacharequal}\ {\isacharparenleft}event\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}String{\isachardot}implode\ l{\isacharcomma}\ i{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ label{\isacharunderscore}eq{\isacharunderscore}def\ input{\isacharunderscore}eq{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ fst{\isacharunderscore}conv\ prod{\isachardot}collapse\ snd{\isacharunderscore}conv{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ alw{\isacharunderscore}not{\isacharunderscore}some{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ statename\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isasymnoteq}\ Some\ s{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none{\isacharbrackleft}of\ e\ r\ t{\isacharbrackright}\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ state{\isacharunderscore}eq{\isacharunderscore}def\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}mono{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ decompose{\isacharunderscore}pair{\isacharcolon}\ {\isachardoublequoteopen}e\ {\isasymnoteq}\ {\isacharparenleft}l{\isacharcomma}\ i{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymnot}\ {\isacharparenleft}fst\ e\ {\isacharequal}l\ {\isasymand}\ snd\ e\ {\isacharequal}\ i{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ fst{\isacharunderscore}conv\ prod{\isachardot}collapse\ sndI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/Documents/efsm-sal/theories/EFSM_LTL.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%18=3%:%
%:%21=4%:%
%:%22=5%:%
%:%23=5%:%
%:%24=6%:%
%:%25=7%:%
%:%26=7%:%
%:%27=8%:%
%:%28=9%:%
%:%29=10%:%
%:%30=11%:%
%:%31=12%:%
%:%32=13%:%
%:%33=13%:%
%:%34=14%:%
%:%35=15%:%
%:%36=15%:%
%:%37=16%:%
%:%38=17%:%
%:%39=18%:%
%:%40=18%:%
%:%41=19%:%
%:%42=20%:%
%:%43=21%:%
%:%44=21%:%
%:%45=22%:%
%:%46=23%:%
%:%51=28%:%
%:%52=29%:%
%:%53=30%:%
%:%54=30%:%
%:%59=35%:%
%:%62=36%:%
%:%66=36%:%
%:%67=36%:%
%:%68=37%:%
%:%69=37%:%
%:%74=37%:%
%:%77=38%:%
%:%78=39%:%
%:%79=39%:%
%:%82=40%:%
%:%86=40%:%
%:%87=40%:%
%:%92=40%:%
%:%95=41%:%
%:%96=42%:%
%:%97=42%:%
%:%98=43%:%
%:%99=44%:%
%:%100=45%:%
%:%101=45%:%
%:%102=46%:%
%:%103=47%:%
%:%104=48%:%
%:%105=48%:%
%:%106=49%:%
%:%107=50%:%
%:%108=51%:%
%:%109=51%:%
%:%112=52%:%
%:%116=52%:%
%:%117=52%:%
%:%122=52%:%
%:%125=53%:%
%:%126=54%:%
%:%127=54%:%
%:%128=55%:%
%:%129=56%:%
%:%130=57%:%
%:%131=57%:%
%:%134=58%:%
%:%138=58%:%
%:%139=58%:%
%:%144=58%:%
%:%147=59%:%
%:%148=60%:%
%:%149=60%:%
%:%150=61%:%
%:%151=62%:%
%:%152=63%:%
%:%153=63%:%
%:%154=64%:%
%:%155=65%:%
%:%156=66%:%
%:%157=66%:%
%:%158=67%:%
%:%159=68%:%
%:%160=69%:%
%:%161=69%:%
%:%162=70%:%
%:%163=71%:%
%:%164=72%:%
%:%165=73%:%
%:%166=74%:%
%:%167=74%:%
%:%170=75%:%
%:%174=75%:%
%:%175=75%:%
%:%180=75%:%
%:%183=76%:%
%:%184=77%:%
%:%185=77%:%
%:%188=78%:%
%:%192=78%:%
%:%193=78%:%
%:%198=78%:%
%:%201=79%:%
%:%202=80%:%
%:%203=80%:%
%:%210=81%:%
%:%211=81%:%
%:%212=82%:%
%:%213=82%:%
%:%214=83%:%
%:%215=84%:%
%:%216=84%:%
%:%217=85%:%
%:%218=85%:%
%:%219=85%:%
%:%220=86%:%
%:%221=86%:%
%:%222=87%:%
%:%228=87%:%
%:%231=88%:%
%:%232=89%:%
%:%233=89%:%
%:%240=90%:%
%:%241=90%:%
%:%242=91%:%
%:%243=91%:%
%:%244=92%:%
%:%245=93%:%
%:%246=93%:%
%:%247=94%:%
%:%248=94%:%
%:%249=94%:%
%:%250=95%:%
%:%251=95%:%
%:%252=96%:%
%:%258=96%:%
%:%261=97%:%
%:%262=98%:%
%:%263=98%:%
%:%270=99%:%
%:%271=99%:%
%:%272=100%:%
%:%273=100%:%
%:%274=101%:%
%:%275=102%:%
%:%276=102%:%
%:%277=103%:%
%:%278=103%:%
%:%279=103%:%
%:%280=104%:%
%:%281=104%:%
%:%282=105%:%
%:%288=105%:%
%:%291=106%:%
%:%292=107%:%
%:%293=107%:%
%:%300=108%:%
%:%301=108%:%
%:%302=109%:%
%:%303=109%:%
%:%304=110%:%
%:%305=111%:%
%:%306=111%:%
%:%307=112%:%
%:%308=112%:%
%:%309=112%:%
%:%310=113%:%
%:%311=113%:%
%:%312=114%:%
%:%318=114%:%
%:%321=115%:%
%:%322=116%:%
%:%323=116%:%
%:%326=117%:%
%:%330=117%:%
%:%331=117%:%
%:%332=118%:%
%:%333=118%:%
%:%338=118%:%
%:%341=119%:%
%:%342=120%:%
%:%343=120%:%
%:%346=121%:%
%:%350=121%:%
%:%351=121%:%
%:%352=122%:%
%:%353=122%:%
%:%354=123%:%
%:%355=123%:%
%:%360=123%:%
%:%363=124%:%
%:%364=125%:%
%:%365=125%:%
%:%368=126%:%
%:%372=126%:%
%:%373=126%:%
%:%378=126%:%
%:%383=127%:%
%:%388=128%:%