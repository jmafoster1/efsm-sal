%
\begin{isabellebody}%
\setisabellecontext{EFSM{\isacharunderscore}LTL}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ EFSM{\isacharunderscore}LTL\isanewline
\isakeyword{imports}\ {\isachardoublequoteopen}EFSM{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isachartilde}{\isachartilde}{\isacharslash}src{\isacharslash}HOL{\isacharslash}Library{\isacharslash}Linear{\isacharunderscore}Temporal{\isacharunderscore}Logic{\isacharunderscore}on{\isacharunderscore}Streams{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isacommand{datatype}\isamarkupfalse%
\ ior\ {\isacharequal}\ ip\ {\isacharbar}\ op\ {\isacharbar}\ rg\isanewline
\isanewline
\isacommand{record}\isamarkupfalse%
\ state\ {\isacharequal}\isanewline
\ \ statename\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ option{\isachardoublequoteclose}\isanewline
\ \ datastate\ {\isacharcolon}{\isacharcolon}\ registers\isanewline
\ \ event\ {\isacharcolon}{\isacharcolon}\ event\isanewline
\ \ {\isachardoublequoteopen}output{\isachardoublequoteclose}\ {\isacharcolon}{\isacharcolon}\ outputs\isanewline
\isanewline
\isacommand{type{\isacharunderscore}synonym}\isamarkupfalse%
\ property\ {\isacharequal}\ {\isachardoublequoteopen}state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ label\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ {\isasymRightarrow}\ String{\isachardot}literal{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}label\ s\ {\isasymequiv}\ fst\ {\isacharparenleft}event\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ inputs\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ {\isasymRightarrow}\ value\ list{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inputs\ s\ {\isasymequiv}\ snd\ {\isacharparenleft}event\ s{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ ltl{\isacharunderscore}step\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ nat\ option\ {\isasymRightarrow}\ registers\ {\isasymRightarrow}\ event\ {\isasymRightarrow}\ {\isacharparenleft}nat\ option\ {\isasymtimes}\ outputs\ {\isasymtimes}\ registers{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ {\isacharunderscore}\ None\ r\ {\isacharunderscore}\ {\isacharequal}\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ e\ {\isacharparenleft}Some\ s{\isacharparenright}\ r\ {\isacharparenleft}l{\isacharcomma}\ i{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}let\ possibilities\ {\isacharequal}\ possible{\isacharunderscore}steps\ e\ s\ r\ l\ i\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ possibilities\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}\ then\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ t{\isacharparenright}\ {\isacharequal}\ Eps\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ x\ {\isacharbar}{\isasymin}{\isacharbar}\ possibilities{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Some\ s{\isacharprime}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}outputs\ {\isacharparenleft}Outputs\ t{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ i\ r{\isacharparenright}{\isacharparenright}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ t{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ i\ r{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ ltl{\isacharunderscore}step{\isacharunderscore}alt{\isacharcolon}\ \ {\isachardoublequoteopen}ltl{\isacharunderscore}step\ e\ {\isacharparenleft}Some\ s{\isacharparenright}\ r\ t\ {\isacharequal}\ {\isacharparenleft}let\ possibilities\ {\isacharequal}\ possible{\isacharunderscore}steps\ e\ s\ r\ {\isacharparenleft}fst\ t{\isacharparenright}\ {\isacharparenleft}snd\ t{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ possibilities\ {\isacharequal}\ {\isacharbraceleft}{\isacharbar}{\isacharbar}{\isacharbraceright}\ then\ {\isacharparenleft}None{\isacharcomma}\ {\isacharbrackleft}{\isacharbrackright}{\isacharcomma}\ r{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ t{\isacharprime}{\isacharparenright}\ {\isacharequal}\ Eps\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ x\ {\isacharbar}{\isasymin}{\isacharbar}\ possibilities{\isacharparenright}\ in\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}Some\ s{\isacharprime}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}outputs\ {\isacharparenleft}Transition{\isachardot}Outputs\ t{\isacharprime}{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ {\isacharparenleft}snd\ t{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}{\isacharcomma}\ {\isacharparenleft}apply{\isacharunderscore}updates\ {\isacharparenleft}Updates\ t{\isacharprime}{\isacharparenright}\ {\isacharparenleft}join{\isacharunderscore}ir\ {\isacharparenleft}snd\ t{\isacharparenright}\ r{\isacharparenright}\ r{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ t{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Let{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{primcorec}\isamarkupfalse%
\ make{\isacharunderscore}full{\isacharunderscore}observation\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ nat\ option\ {\isasymRightarrow}\ registers\ {\isasymRightarrow}\ event\ stream\ {\isasymRightarrow}\ state\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s\ d\ i\ {\isacharequal}\ {\isacharparenleft}let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ o{\isacharprime}{\isacharcomma}\ d{\isacharprime}{\isacharparenright}\ {\isacharequal}\ ltl{\isacharunderscore}step\ e\ s\ d\ {\isacharparenleft}shd\ i{\isacharparenright}\ in\ {\isasymlparr}statename\ {\isacharequal}\ s{\isacharcomma}\ datastate\ {\isacharequal}\ d{\isacharcomma}\ event{\isacharequal}{\isacharparenleft}shd\ i{\isacharparenright}{\isacharcomma}\ output\ {\isacharequal}\ o{\isacharprime}{\isasymrparr}{\isacharhash}{\isacharhash}{\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s{\isacharprime}\ d{\isacharprime}\ {\isacharparenleft}stl\ i{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ make{\isacharunderscore}full{\isacharunderscore}observation{\isacharunderscore}unfold{\isacharcolon}\ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s\ d\ i\ {\isacharequal}\ {\isacharparenleft}let\ {\isacharparenleft}s{\isacharprime}{\isacharcomma}\ o{\isacharprime}{\isacharcomma}\ d{\isacharprime}{\isacharparenright}\ {\isacharequal}\ ltl{\isacharunderscore}step\ e\ s\ d\ {\isacharparenleft}shd\ i{\isacharparenright}\ in\ {\isasymlparr}statename\ {\isacharequal}\ s{\isacharcomma}\ datastate\ {\isacharequal}\ d{\isacharcomma}\ event{\isacharequal}{\isacharparenleft}shd\ i{\isacharparenright}{\isacharcomma}\ output\ {\isacharequal}\ o{\isacharprime}{\isasymrparr}{\isacharhash}{\isacharhash}{\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ s{\isacharprime}\ d{\isacharprime}\ {\isacharparenleft}stl\ i{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ make{\isacharunderscore}full{\isacharunderscore}observation{\isachardot}code\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ watch\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}transition{\isacharunderscore}matrix\ {\isasymRightarrow}\ event\ stream\ {\isasymRightarrow}\ state\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}watch\ e\ i\ {\isasymequiv}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ {\isacharparenleft}Some\ {\isadigit{0}}{\isacharparenright}\ {\isacharless}{\isachargreater}\ i{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ Outputs\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ value\ option{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}Outputs\ n\ s\ {\isasymequiv}\ nth\ {\isacharparenleft}output\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ Inputs\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ value{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}Inputs\ n\ s\ {\isasymequiv}\ nth\ {\isacharparenleft}inputs\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}n{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ Registers\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ value\ option{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}Registers\ n\ s\ {\isasymequiv}\ datastate\ {\isacharparenleft}shd\ s{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ StateEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ option\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}StateEq\ v\ s\ {\isasymequiv}\ statename\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ StateEq{\isacharunderscore}None{\isacharunderscore}not{\isacharunderscore}Some{\isacharcolon}\ {\isachardoublequoteopen}StateEq\ None\ s\ {\isasymLongrightarrow}\ {\isasymnot}\ StateEq\ {\isacharparenleft}Some\ n{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ StateEq{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ LabelEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}string\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}LabelEq\ v\ s\ {\isasymequiv}\ fst\ {\isacharparenleft}event\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}String{\isachardot}implode\ v{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ watch{\isacharunderscore}label{\isacharcolon}\ {\isachardoublequoteopen}LabelEq\ l\ {\isacharparenleft}watch\ e\ t{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}fst\ {\isacharparenleft}shd\ t{\isacharparenright}\ {\isacharequal}\ String{\isachardot}implode\ l{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ LabelEq{\isacharunderscore}def\ watch{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ InputEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}value\ list\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}InputEq\ v\ s\ {\isasymequiv}\ inputs\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ EventEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}string\ {\isasymtimes}\ inputs{\isacharparenright}\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}EventEq\ e\ {\isacharequal}\ LabelEq\ {\isacharparenleft}fst\ e{\isacharparenright}\ aand\ InputEq\ {\isacharparenleft}snd\ e{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ OutputEq\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}value\ option\ list\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}OutputEq\ v\ s\ {\isasymequiv}\ output\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ InputLength\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}InputLength\ v\ s\ {\isasymequiv}\ length\ {\isacharparenleft}inputs\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ OutputLength\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}OutputLength\ v\ s\ {\isasymequiv}\ length\ {\isacharparenleft}output\ {\isacharparenleft}shd\ s{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ v{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ {\isachardoublequoteopen}checkInx{\isachardoublequoteclose}\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ior\ {\isasymRightarrow}\ nat\ {\isasymRightarrow}\ {\isacharparenleft}value\ option\ {\isasymRightarrow}\ value\ option\ {\isasymRightarrow}\ trilean{\isacharparenright}\ {\isasymRightarrow}\ value\ option\ {\isasymRightarrow}\ state\ stream\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}checkInx\ ior{\isachardot}ip\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}Some\ {\isacharparenleft}Inputs\ {\isacharparenleft}n{\isacharminus}{\isadigit{1}}{\isacharparenright}\ s{\isacharparenright}{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}checkInx\ ior{\isachardot}op\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}Outputs\ n\ s{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
\ \ {\isachardoublequoteopen}checkInx\ ior{\isachardot}rg\ n\ f\ v\ s\ {\isacharequal}\ {\isacharparenleft}f\ {\isacharparenleft}datastate\ {\isacharparenleft}shd\ s{\isacharparenright}\ n{\isacharparenright}\ v\ {\isacharequal}\ trilean{\isachardot}true{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ shd{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}StateEq\ None{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ StateEq{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ unfold{\isacharunderscore}observe{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ d\ t\ {\isacharequal}\ {\isacharparenleft}{\isasymlparr}statename\ {\isacharequal}\ None{\isacharcomma}\ datastate\ {\isacharequal}\ d{\isacharcomma}\ event{\isacharequal}{\isacharparenleft}shd\ t{\isacharparenright}{\isacharcomma}\ output\ {\isacharequal}\ {\isacharbrackleft}{\isacharbrackright}{\isasymrparr}{\isacharhash}{\isacharhash}{\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ d\ {\isacharparenleft}stl\ t{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ stream{\isachardot}expand{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}StateEq\ None{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ StateEq{\isacharunderscore}def\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}output{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}OutputEq\ {\isacharbrackleft}{\isacharbrackright}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ OutputEq{\isacharunderscore}def\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}x{\isachardot}\ datastate\ {\isacharparenleft}shd\ x{\isacharparenright}\ {\isacharequal}\ r{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ no{\isacharunderscore}updates{\isacharunderscore}none{\isacharunderscore}individual{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}checkInx\ rg\ n\ ValueEq\ {\isacharparenleft}r\ n{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ ss\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream\ {\isasymRightarrow}\ state\ stream{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}String{\isachardot}literal\ {\isasymtimes}\ value\ list{\isacharparenright}\ stream{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymforall}f\ p\ s{\isachardot}\ f\ {\isacharparenleft}stl\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymnoteq}\ stl\ {\isacharparenleft}f\ {\isacharparenleft}ss\ f{\isacharparenright}{\isacharparenright}\ {\isasymor}\ alw\ p\ {\isacharparenleft}f\ s{\isacharparenright}\ {\isacharequal}\ alw\ {\isacharparenleft}{\isasymlambda}s{\isachardot}\ p\ {\isacharparenleft}f\ s{\isacharparenright}{\isacharparenright}\ s{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharparenright}\ alw{\isacharunderscore}inv{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ValueEq{\isacharunderscore}def\ all{\isacharunderscore}imp{\isacharunderscore}alw{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ event{\isacharunderscore}components{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}LabelEq\ l\ aand\ InputEq\ i{\isacharparenright}\ s\ {\isacharequal}\ {\isacharparenleft}event\ {\isacharparenleft}shd\ s{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}String{\isachardot}implode\ l{\isacharcomma}\ i{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ LabelEq{\isacharunderscore}def\ InputEq{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ fst{\isacharunderscore}conv\ prod{\isachardot}collapse\ snd{\isacharunderscore}conv{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ alw{\isacharunderscore}not{\isacharunderscore}some{\isacharcolon}\ {\isachardoublequoteopen}alw\ {\isacharparenleft}{\isasymlambda}xs{\isachardot}\ statename\ {\isacharparenleft}shd\ xs{\isacharparenright}\ {\isasymnoteq}\ Some\ s{\isacharparenright}\ {\isacharparenleft}make{\isacharunderscore}full{\isacharunderscore}observation\ e\ None\ r\ t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ once{\isacharunderscore}none{\isacharunderscore}always{\isacharunderscore}none{\isacharbrackleft}of\ e\ r\ t{\isacharbrackright}\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ StateEq{\isacharunderscore}def\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ alw{\isacharunderscore}mono{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ decompose{\isacharunderscore}pair{\isacharcolon}\ {\isachardoublequoteopen}e\ {\isasymnoteq}\ {\isacharparenleft}l{\isacharcomma}\ i{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isasymnot}\ {\isacharparenleft}fst\ e\ {\isacharequal}l\ {\isasymand}\ snd\ e\ {\isacharequal}\ i{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ fst{\isacharunderscore}conv\ prod{\isachardot}collapse\ sndI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/Documents/efsm-sal/theories/EFSM_LTL.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%18=3%:%
%:%21=4%:%
%:%22=5%:%
%:%23=5%:%
%:%24=6%:%
%:%25=7%:%
%:%26=7%:%
%:%27=8%:%
%:%28=9%:%
%:%29=10%:%
%:%30=11%:%
%:%31=12%:%
%:%32=13%:%
%:%33=13%:%
%:%34=14%:%
%:%35=15%:%
%:%36=15%:%
%:%37=16%:%
%:%38=17%:%
%:%39=18%:%
%:%40=18%:%
%:%41=19%:%
%:%42=20%:%
%:%43=21%:%
%:%44=21%:%
%:%45=22%:%
%:%46=23%:%
%:%51=28%:%
%:%52=29%:%
%:%53=30%:%
%:%54=30%:%
%:%59=35%:%
%:%62=36%:%
%:%66=36%:%
%:%67=36%:%
%:%68=37%:%
%:%69=37%:%
%:%74=37%:%
%:%77=38%:%
%:%78=39%:%
%:%79=39%:%
%:%80=40%:%
%:%81=41%:%
%:%82=42%:%
%:%83=42%:%
%:%86=43%:%
%:%90=43%:%
%:%91=43%:%
%:%92=43%:%
%:%97=43%:%
%:%100=44%:%
%:%101=45%:%
%:%102=45%:%
%:%103=46%:%
%:%104=47%:%
%:%105=48%:%
%:%106=48%:%
%:%107=49%:%
%:%108=50%:%
%:%109=51%:%
%:%110=51%:%
%:%111=52%:%
%:%112=53%:%
%:%113=54%:%
%:%114=54%:%
%:%115=55%:%
%:%116=56%:%
%:%117=57%:%
%:%118=57%:%
%:%119=58%:%
%:%120=59%:%
%:%121=60%:%
%:%122=60%:%
%:%125=61%:%
%:%129=61%:%
%:%130=61%:%
%:%135=61%:%
%:%138=62%:%
%:%139=63%:%
%:%140=63%:%
%:%141=64%:%
%:%142=65%:%
%:%143=66%:%
%:%144=66%:%
%:%147=67%:%
%:%151=67%:%
%:%152=67%:%
%:%157=67%:%
%:%160=68%:%
%:%161=69%:%
%:%162=69%:%
%:%163=70%:%
%:%164=71%:%
%:%165=72%:%
%:%166=72%:%
%:%167=73%:%
%:%168=74%:%
%:%169=75%:%
%:%170=75%:%
%:%171=76%:%
%:%172=77%:%
%:%173=78%:%
%:%174=78%:%
%:%175=79%:%
%:%176=80%:%
%:%177=81%:%
%:%178=81%:%
%:%179=82%:%
%:%180=83%:%
%:%181=84%:%
%:%182=84%:%
%:%183=85%:%
%:%184=86%:%
%:%185=87%:%
%:%186=88%:%
%:%187=89%:%
%:%188=89%:%
%:%191=90%:%
%:%195=90%:%
%:%196=90%:%
%:%201=90%:%
%:%204=91%:%
%:%205=92%:%
%:%206=92%:%
%:%209=93%:%
%:%213=93%:%
%:%214=93%:%
%:%219=93%:%
%:%222=94%:%
%:%223=95%:%
%:%224=95%:%
%:%231=96%:%
%:%232=96%:%
%:%233=97%:%
%:%234=97%:%
%:%235=98%:%
%:%236=99%:%
%:%237=99%:%
%:%238=100%:%
%:%239=100%:%
%:%240=100%:%
%:%241=101%:%
%:%242=101%:%
%:%243=102%:%
%:%249=102%:%
%:%252=103%:%
%:%253=104%:%
%:%254=104%:%
%:%261=105%:%
%:%262=105%:%
%:%263=106%:%
%:%264=106%:%
%:%265=107%:%
%:%266=108%:%
%:%267=108%:%
%:%268=109%:%
%:%269=109%:%
%:%270=109%:%
%:%271=110%:%
%:%272=110%:%
%:%273=111%:%
%:%279=111%:%
%:%282=112%:%
%:%283=113%:%
%:%284=113%:%
%:%291=114%:%
%:%292=114%:%
%:%293=115%:%
%:%294=115%:%
%:%295=116%:%
%:%296=117%:%
%:%297=117%:%
%:%298=118%:%
%:%299=118%:%
%:%300=118%:%
%:%301=119%:%
%:%302=119%:%
%:%303=120%:%
%:%309=120%:%
%:%312=121%:%
%:%313=122%:%
%:%314=122%:%
%:%321=123%:%
%:%322=123%:%
%:%323=124%:%
%:%324=124%:%
%:%325=125%:%
%:%326=126%:%
%:%327=126%:%
%:%328=127%:%
%:%329=127%:%
%:%330=127%:%
%:%331=128%:%
%:%332=128%:%
%:%333=129%:%
%:%339=129%:%
%:%342=130%:%
%:%343=131%:%
%:%344=131%:%
%:%347=132%:%
%:%351=132%:%
%:%352=132%:%
%:%353=133%:%
%:%354=133%:%
%:%359=133%:%
%:%362=134%:%
%:%363=135%:%
%:%364=135%:%
%:%367=136%:%
%:%371=136%:%
%:%372=136%:%
%:%373=137%:%
%:%374=137%:%
%:%375=138%:%
%:%376=138%:%
%:%381=138%:%
%:%384=139%:%
%:%385=140%:%
%:%386=140%:%
%:%389=141%:%
%:%393=141%:%
%:%394=141%:%
%:%399=141%:%
%:%404=142%:%
%:%409=143%:%